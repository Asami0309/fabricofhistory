<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Blugoon HTML Bootstrap 4 Template</title>
    <meta name="description" content="" />
    <meta name="author" content="Tooplate" />
    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <!-- Additional CSS Files -->
    <link href="https://fonts.googleapis.com/css?family=Lato:100,300,400,700,900" rel="stylesheet" />
    <link rel="stylesheet" href="assets/css/fontawesome.css" />
    <link rel="stylesheet" href="assets/css/tooplate-style.css" />
    <link rel="stylesheet" href="assets/css/owl.css" />
    <link rel="stylesheet" href="assets/css/lightbox.css" />

  </head>

  <style>
  .axis text{
  font-family:sans-serif;
  font-size:16px;
}
  .bar{
    position:relative;
    margin-left: 100px;
  }
  #line .bar .domain{
  stroke: #FFF2CC ;
  }

  #line .bar .stroke{
  stroke: #FFF2CC ;
  }
  svg {
    overflow: overlay;
    vertical-align: middle;
  }
  #my_dataviz {
    float: left;
    position: relative;
    margin-top: -44px;
    width:350px;
}
  #my_dataviz2, #my_dataviz3, #my_dataviz4, #my_dataviz5, #my_dataviz6, #my_dataviz7, #my_dataviz8, #my_dataviz9, #my_dataviz10{
    position: relative;
    margin-left: 100px;
    margin-top: -44px;
    width:350px;
    overflow-y: auto;
  }
#graphic{
  margin-left: 12px;
  padding-top: 10px;
  /* width: 1500px;
  background: #f9edcf; */
}
text.person {
  font-weight: 300;
  /* transform: rotate(45deg); /* W3C */
  /* -webkit-transform: rotate(45deg);
  -moz-transform: rotate(45deg);
  -ms-transform: rotate(45deg);
  -o-transform: rotate(45deg);  */
}
  </style>
<!--
Tooplate 2116 Blugoon
https://www.tooplate.com/view/2116-blugoon
-->
  <body>
    <div id="page-wraper">
      <!-- Sidebar Menu -->
      <div class="responsive-nav">
        <!-- <i class="fa fa-bars" id="menu-toggle"></i> -->
        <div id="menu" class="menu">
          <!-- <i class="fa fa-times" id="menu-close"></i> -->
          <div class="container">
            <div class="author-content">
              <h4>Fabric of </br>History</h4>
            <nav class="main-nav" role="navigation">
              <ul class="main-menu">
                <div class="tatesen">
                  <hr>
                  <hr>
                  <hr>
                  <hr>
                  <hr>
                  <hr>
                  <hr>
                  <hr>
                  <hr>
                  <hr>
                  <hr>
                </div>
                <li><a href="#">Boots</a></li>
                <li><a href="#">Vest</a></li>
                <li><a href="#">Glove</a></li>
                <li><a href="#">Suit</a></li>
                <li><a href="#">Dress</a></li>
                <li><a href="#">Coat</a></li>
                <li><a href="#">Clogs</a></li>
                <li><a href="#">Collar</a></li>
                <li><a href="#">Shirt</a></li>
                <li><a href="#">Stockings</a></li>
                <li><a href="#">Bodice</a></li>
              </ul>
            </nav>



          </div>
          <a href='../one/index.html'>< back to top</a>
            <div class="copyright-text">
              <p>Copyright 2022 <br>Fabrick of Fashion History<br>
              Design: Asami Ozawa</p>
            </div>
          </div>
        </div>

        <div id="menu" class="menu2">
          <div class="container">

            <div class="author-content">


          <div class="howto">
          <h4>How to read</h4>
            <img src="../assets/images/howto.png" alt="how to read" />
            <p>The point where the line connecting the decade and
the author intersects represent the type of exhibit.
Mouse hover over the path to see the image of the
corresponding article.</p>
          </div>
          <div class="image">
            <a href="#"><img src="assets/images/logo-image.png" alt="Blugoon by Tooplate" /></a>
          </div>
          <!-- <div class="description">
            <text class="titel">Sybille</text>
          <text class="year">1935</text>
        </div> -->
          <a href="https://www.vam.ac.uk/collections?type=featured" class="btn btn--orange">Go to Collections Page</a>
        </div>
          </div>
        </div>


      <section class="section about-me" data-section="section1">
        <div class="tatesen">
          <hr>
          <hr>
          <hr>
          <hr>
          <hr>
          <hr>
          <hr>
          <hr>
          <hr>
          <hr>
          <hr>
        </div>

            <div id="graphic">
            <svg id="line" width="100%" height="70"></svg>
            <div class="decade">
            <li class="dec">1900's</li>
            <li class="dec">1910's</li>
            <li class="dec">1920's</li>
            <li class="dec">1930's</li>
            <li class="dec">1940's</li>
            <li class="dec">1950's</li>
            <li class="dec">1960's</li>
            <li class="dec">1970's</li>
            <li class="dec">1980's</li>
            <li class="dec">1990's</li>
          </div>
            <svg id="my_dataviz"  ></svg>
            <svg id="my_dataviz2" ></svg>
            <svg id="my_dataviz3" ></svg>
            <svg id="my_dataviz4" ></svg>
            <svg id="my_dataviz5" ></svg>
            <svg id="my_dataviz6" ></svg>
            <svg id="my_dataviz7" ></svg>
            <svg id="my_dataviz8" ></svg>
            <svg id="my_dataviz9" ></svg>
            <svg id="my_dataviz10" ></svg>
          </div>


      </div>
      </section>




    </div>
    <!-- Scripts -->
    <!-- Bootstrap core JavaScript -->
    <script src="../vendor/jquery/jquery.min.js"></script>
    <script src="../vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <script src="assets/js/isotope.min.js"></script>
    <script src="assets/js/owl-carousel.js"></script>
    <script src="assets/js/lightbox.js"></script>
    <script src="assets/js/custom.js"></script>
    <script>
      //according to loftblog tut
      $(".main-menu li:first").addClass("active");

      var showSection = function showSection(section, isAnimate) {
        var direction = section.replace(/#/, ""),
          reqSection = $(".section").filter(
            '[data-section="' + direction + '"]'
          ),
          reqSectionPos = reqSection.offset().top - 0;

        if (isAnimate) {
          $("body, html").animate(
            {
              scrollTop: reqSectionPos
            },
            800
          );
        } else {
          $("body, html").scrollTop(reqSectionPos);
        }
      };

      var checkSection = function checkSection() {
        $(".section").each(function() {
          var $this = $(this),
            topEdge = $this.offset().top - 80,
            bottomEdge = topEdge + $this.height(),
            wScroll = $(window).scrollTop();
          if (topEdge < wScroll && bottomEdge > wScroll) {
            var currentId = $this.data("section"),
              reqLink = $("a").filter("[href*=\\#" + currentId + "]");
            reqLink
              .closest("li")
              .addClass("active")
              .siblings()
              .removeClass("active");
          }
        });
      };

      $(".main-menu").on("click", "a", function(e) {
        e.preventDefault();
        showSection($(this).attr("href"), true);
      });

      $(window).scroll(function() {
        checkSection();
      });
    </script>
    <!-- Load d3.js -->
    <script src="https://d3js.org/d3.v4.js"></script>

    <!-- Create a div where the graph will take place -->


    <script>
    // var xScale = d3.scaleLinear()
    //     .domain([1900, 1999]).range([10, 2610]);
    //
    // var axis = d3.axisTop(xScale);
    //
    // d3.select("#line")
    //     .append("g")
    //     .attr('class', 'bar')
    //     .attr("width", 2000)
    //     .attr("transform","translate(-30,85)")
    //     .call(axis)
    //     .selectAll("text", function(d){
    //       return scale(value)+"'s"
    //     })
    //     .style("text-anchor", "start")
    //     .style("fill", "black")
    //     .style("font-size", "13")
    //     .attr("dx", "0.8em")
    //     .attr("dy", "0em")
        // .attr("transform", function(d) {
        // return"rotate(-45)"
        // });

    // set the dimensions and margins of the graph
    var margin = {top: 30, right: 130, bottom: 50, left: -10},
      width = 650 - margin.left - margin.right,
      height = 810 - margin.top - margin.bottom;

    // append the svg object to the body of the page

// var svgs = [];
// for (var i = 0; i < 10; i +=1) {
//   svgs.push(
//     d3.select("#my_dataviz" + i)
//       .append("svg")
//       .attr("width", width + margin.left + margin.right)
//       .attr("height", height + margin.top + margin.bottom)
//       .append("g")
//       .attr("transform",
//             "translate(" + margin.left + "," + margin.top + ")")
//   );
// }
//
// svgs[4]


// createVis("../1900-1.json", "../1900-2.json", "#my_dataviz")
// createVis("../1910-1.json", "../1910-2.json", "#my_dataviz2")
// createVis("../1920-1.json", "../1920-2.json", "#my_dataviz3")
// createVis("../1930-1.json", "../1930-2.json", "#my_dataviz4")
// createVis("../1940-1.json", "../1940-2.json", "#my_dataviz5")
// createVis("../1950-1.json", "../1950-2.json", "#my_dataviz6")
// createVis("../1960-1.json", "../1960-2.json", "#my_dataviz7")
// createVis("../1970-1.json", "../1970-2.json", "#my_dataviz8")
// createVis("../1980-1.json", "../1980-2.json", "#my_dataviz9")
// createVis("../1990-1.json", "../1990-2.json", "#my_dataviz10")

createVis("../two/1900-1.json", "../two/1900-2.json", "#my_dataviz")
createVis("../two/1910-1.json", "../two/1910-2.json", "#my_dataviz2")
createVis("../two/1920-1.json", "../two/1920-2.json", "#my_dataviz3")
createVis("../two/1930-1.json", "../two/1930-2.json", "#my_dataviz4")
createVis("../two/1940-1.json", "../two/1940-2.json", "#my_dataviz5")
createVis("../two/1950-1.json", "../two/1950-2.json", "#my_dataviz6")
createVis("../two/1960-1.json", "../two/1960-2.json", "#my_dataviz7")
createVis("../two/1970-1.json", "../two/1970-2.json", "#my_dataviz8")
createVis("../two/1980-1.json", "../two/1980-2.json", "#my_dataviz9")
createVis("../two/1990-1.json", "../two/1990-2.json", "#my_dataviz10")

function createVis(dataset1, dataset2, target) {
  var svg = d3.select(target)
                    .append("svg")
                    .attr("width", width + margin.left + margin.right)
                    .attr("height", height + margin.top + margin.bottom)
                    .append("g")
                    .attr("transform",
                            "translate(" + margin.left + "," + margin.top + ")");



  var Tooltip = d3.select('#graphic')
        .append("div")
        .style("opacity", 0)
        .attr("class", "tooltip")


        // Three function that change the tooltip when user hover / move / leave a cell
 var mouseover = function(d) {
   Tooltip
    .transition().duration(200)
     .style("opacity", 1)
   d3.select(this)
     .transition()

     d3.select(this)
       .style("stroke", "red")
       .attr("stroke-width",2)
 }


 var mousemove = function(d) {
   console.log(d)
   Tooltip
   // .html("Titel: " + d.titel + "url:" + d.url + "image:" + d.img)
   .style("alignment-baseline", "start")
     .html("<div class='user-avatar'>" +
                "<img src='" + d.img + "' alt='' />" +
                "</div>")
   .style('background-size','cover')
   .style("left", (d3.event.clientX-100) + "px")
   .style("top", (d3.event.clientY-100) + "px")
  }

 var mouseleave = function(d) {
   Tooltip
    .style("opacity", 0)
    d3.select(this)
     // .style("stroke", "none")
     .transition()
     .duration(300)
     .style("stroke", "black")
     .attr("stroke-width",0.5)

 }



// ----------------line SVG
    // Read dummy data
d3.json(dataset1, function(data) {

      // List of node names
      var allNodes = data.nodes.map(function(d){return d.name})

      // A linear scale to position the nodes on the X axis
      var y = d3.scalePoint()
        .range([0, height])
        .domain(allNodes)


      var idToNode = {};
      data.nodes.forEach(function (n) {
        idToNode[n.id] = n;
      });



      svg
        .selectAll('mylinks')
        .data(data.links)
        .enter()
        .append('path')
        .attr('d', function (d) {
          start = y(idToNode[d.source].name)
          end = y(idToNode[d.target].name)
          return ['M', 50, start,
            'A',
            (start - end)/2*0.4, ',',
            (start - end)/4, 10, 0, ',',
            start < end ? 1 : 0, 50, ',', end]
            .join(' ');
        })
        .style("fill", "none")
        .attr("stroke", "black")
        .attr("stroke-width", 0.5)
       .on("mouseover", mouseover)
       .on("mousemove", mousemove)
       .on("mouseleave", mouseleave)



});



d3.json(dataset2, function( data) {

      // List of node names
      var allNodes = data.nodes.map(function(d){return d.name})

      // A linear scale to position the nodes on the X axis
      var y = d3.scalePoint()
        .range([0, height])
        .domain(allNodes)

      // Add the circle for the nodes
      // svg
      //   .selectAll("mynodes")
      //   .data(data.nodes)
      //   .enter()
      //   .append("circle")
      //     .attr("cx", 50)
      //     .attr("cy", function(d){ return(y(d.name))})
      //     .attr("r", 2)
      //     .style("fill", "black")

      // And give them a label
      svg
        .selectAll("mylabels")
        .data(data.nodes)
        .enter()
        .append("text")
          .attr('class', 'person')
          .attr("x",60)
          .attr("y", function(d){ return(y(d.name))})
          .text(function(d){ return(d.name)})
          .selectAll("text")
          .style("text-anchor", "middle")
          .style("alignment-baseline", "start")
          .style("fill", "black")
          // .attr("transform", function(d) {
          // return "rotate(-45)"});



      var idToNode = {};
      data.nodes.forEach(function (n) {
        idToNode[n.id] = n;
      });
      // Cool, now if I do idToNode["2"].name I've got the name of the node with id 2



        svg
          .selectAll('mylinks')
          .data(data.links)
          .enter()
          .append('path')
          .attr('d', function (d) {
            start = y(idToNode[d.source].name)    // X position of start node on the X axis
            end = y(idToNode[d.target].name)      // X position of end node
            return ['M', 50, start,    // the arc starts at the coordinate x=start, y=height-30 (where the starting node is)
              'A',                            // This means we're gonna build an elliptical arc
              (start - end)/2*0.4, ',',    // Next 2 lines are the coordinates of the inflexion point. Height of this point is proportional with start - end distance
              (start - end)/4, 10, 0, ',',
              start < end ? 0 : 0, 50, ',', end] // We always want the arc on top. So if end is before start, putting 0 here turn the arc upside down.
              .join(' ');
          })
          .style("fill", "none")
          .attr("stroke", "black")
          .attr("stroke-width", 0.5)
         .on("mouseover", mouseover)
         .on("mousemove", mousemove)
         .on("mouseleave", mouseleave)
    });
}



   // add the squares

//---------------

    </script>

  </body>
</html>
